consul:
  extends:
    file: common.yml
    service: consul
registrator:
  extends:
    file: common.yml
    service: registrator
  links:
    - consul:consul
db:
  extends:
    file: common.yml
    service: db
  volumes_from:
    - dbdata
pdv:
  extends:
    file: common.yml
    service: pdv
  environment:
    - PLATFORM=dev
  volumes:
    - ../esc-pdv/src:/esc-pdv
  links:
    - consul:consul
caisse:
  extends:
    file: common.yml
    service: caisse
  environment:
    - PLATFORM=dev
  volumes:
    - ../esc-caisse/src:/esc-caisse
    - /tmp/tickets:/esc-caisse/tickets
  links:
    - consul:consul
adm:
  extends:
    file: common.yml
    service: adm
  volumes:
    - ../esc-adm/src:/esc-adm
  links:
    - consul:consul
  environment:
    - PLATFORM=dev
smtp:
  extends:
    file: common.yml
    service: smtp
  links:
    - consul:consul
back:
  build: back
  extends:
    file: common.yml
    service: back
  links:
    - consul:consul
sync:
  extends:
    file: common.yml
    service: sync
  links:
    - consul:consul
  volumes:
    - /tmp/tickets:/tickets
client:
  extends:
    file: common.yml
    service: client
  ports:
    - "80:80"
  links:
    - consul:consul
  volumes:
    - ../bearded-basket/client:/client
    - ./ssl/:/etc/ssl/private
